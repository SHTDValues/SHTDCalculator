<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Calculator</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #1a1a1a, #2d2d2d); color: #e0e0e0; min-height: 100vh; zoom: 0.8; }
        .container { max-width: 1800px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; margin-bottom: 30px; transform: translateY(0); transition: transform 0.3s ease; }
        .header:hover { transform: translateY(-5px); }
        .header h1 { color: #4a9eff; font-size: 2.5em; text-shadow: 0 0 10px rgba(74, 158, 255, 0.3); transition: text-shadow 0.3s ease; }
        .header h1:hover { text-shadow: 0 0 20px rgba(74, 158, 255, 0.6); }
        .trading-area { display: grid; grid-template-columns: 1fr auto 1fr; gap: 30px; margin-bottom: 30px; }
        .side { background: rgba(45, 45, 45, 0.8); border-radius: 10px; padding: 20px; border: 2px solid #4a9eff; transition: all 0.3s ease; transform: scale(1); }
        .side:hover { transform: scale(1.02); border-color: #6bb6ff; box-shadow: 0 8px 25px rgba(74, 158, 255, 0.3); }
        .side h2 { color: #4a9eff; margin-bottom: 15px; text-align: center; transition: color 0.3s ease; }
        .side:hover h2 { color: #6bb6ff; }
        .vs { display: flex; align-items: center; justify-content: center; font-size: 2em; color: #4a9eff; font-weight: bold; transition: all 0.3s ease; }
        .vs:hover { color: #6bb6ff; transform: scale(1.1); }
        .unit-input { display: grid; grid-template-columns: 2fr 1fr 1fr auto; gap: 10px; margin-bottom: 10px; align-items: center; padding: 10px; border-radius: 8px; transition: background 0.3s ease; }
        .unit-input:hover { background: rgba(74, 158, 255, 0.05); }
        .custom-dropdown { position: relative; width: 100%; }
        .dropdown-selected { background: #333; color: #e0e0e0; border: 1px solid #555; border-radius: 5px; padding: 12px 35px 12px 12px; cursor: pointer; transition: all 0.3s ease; position: relative; font-size: 14px; min-height: 45px; display: flex; align-items: center; }
        .dropdown-selected:hover { border-color: #4a9eff; background: #3a3a3a; transform: translateY(-1px); box-shadow: 0 4px 12px rgba(74, 158, 255, 0.2); }
        .dropdown-selected.active { border-color: #4a9eff; background: #3a3a3a; }
        .dropdown-selected::after { content: '▼'; position: absolute; right: 12px; color: #4a9eff; transition: transform 0.3s ease; font-size: 12px; }
        .dropdown-selected.active::after { transform: rotate(180deg); }
        .dropdown-options { position: absolute; top: 100%; left: 0; right: 0; background: #2a2a2a; border: 1px solid #4a9eff; border-radius: 8px; max-height: 250px; overflow-y: auto; z-index: 1000; opacity: 0; transform: translateY(-10px); visibility: hidden; transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55); box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3); }
        .dropdown-options.open { opacity: 1; transform: translateY(0); visibility: visible; }
        .dropdown-option { padding: 12px 15px; cursor: pointer; transition: all 0.2s ease; border-bottom: 1px solid rgba(74, 158, 255, 0.1); font-size: 14px; }
        .dropdown-option:last-child { border-bottom: none; }
        .dropdown-option:hover { background: rgba(74, 158, 255, 0.15); padding-left: 20px; color: #6bb6ff; }
        .dropdown-option.selected { background: rgba(74, 158, 255, 0.2); color: #4a9eff; }
        .rarity-tag { display: inline-block; padding: 2px 6px; border-radius: 3px; font-size: 10px; margin-right: 8px; font-weight: bold; }
        .rarity-Secret { background: #8b0000; color: white; }
        .rarity-Exclusive { background: #228b22; color: white; }
        .rarity-Mythic { background: linear-gradient(45deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3); color: white; }
        .rarity-Legendary { background: #ffd700; color: black; }
        .rarity-Epic { background: #8b008b; color: white; }
        .rarity-Rare { background: #4169e1; color: white; }
        .unit-input input[type="number"] { background: #333; color: #e0e0e0; border: 1px solid #555; border-radius: 5px; padding: 12px; transition: all 0.3s ease; font-size: 14px; }
        .unit-input input[type="number"]:focus { outline: none; border-color: #4a9eff; background: #3a3a3a; transform: translateY(-1px); box-shadow: 0 4px 12px rgba(74, 158, 255, 0.2); }
        .unit-input input[type="number"]:hover { border-color: #6bb6ff; background: #3a3a3a; }
        .remove-btn { background: linear-gradient(45deg, #ff4757, #ff3742); color: white; border: none; padding: 12px 15px; border-radius: 5px; cursor: pointer; transition: all 0.3s ease; font-weight: bold; font-size: 16px; }
        .remove-btn:hover { background: linear-gradient(45deg, #ff3742, #ff2233); transform: scale(1.1); box-shadow: 0 4px 15px rgba(255, 71, 87, 0.4); }
        .remove-btn:active { transform: scale(0.95); }
        .add-btn { background: linear-gradient(45deg, #4a9eff, #357abd); color: white; border: none; padding: 12px 20px; border-radius: 5px; cursor: pointer; margin-top: 10px; width: 100%; transition: all 0.3s ease; font-weight: bold; font-size: 16px; }
        .add-btn:hover { background: linear-gradient(45deg, #357abd, #2968a3); transform: translateY(-2px); box-shadow: 0 6px 20px rgba(74, 158, 255, 0.4); }
        .add-btn:active { transform: translateY(0); }
        .result { background: rgba(45, 45, 45, 0.9); border-radius: 10px; padding: 20px; text-align: center; border: 2px solid #4a9eff; transition: all 0.3s ease; }
        .result:hover { border-color: #6bb6ff; box-shadow: 0 8px 25px rgba(74, 158, 255, 0.3); transform: translateY(-2px); }
        .result h2 { margin-bottom: 15px; transition: color 0.3s ease; }
        .result:hover h2 { color: #6bb6ff; }
        .values { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 15px; }
        .value-box { background: rgba(74, 158, 255, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(74, 158, 255, 0.3); transition: all 0.3s ease; }
        .value-box:hover { background: rgba(74, 158, 255, 0.2); border-color: rgba(74, 158, 255, 0.6); transform: translateY(-3px); box-shadow: 0 6px 20px rgba(74, 158, 255, 0.2); }
        .trade-status { font-size: 1.5em; font-weight: bold; padding: 15px; border-radius: 8px; margin-top: 15px; transition: all 0.3s ease; }
        .trade-status:hover { transform: scale(1.05); }
        .win { background: rgba(46, 204, 113, 0.2); color: #2ecc71; border: 1px solid #2ecc71; }
        .lose { background: rgba(231, 76, 60, 0.2); color: #e74c3c; border: 1px solid #e74c3c; }
        .fair { background: rgba(241, 196, 15, 0.2); color: #f1c40f; border: 1px solid #f1c40f; }
        .na { background: rgba(149, 165, 166, 0.2); color: #95a5a6; border: 1px solid #95a5a6; }
        .credits { text-align: center; margin-top: 30px; padding: 20px; color: #888; font-size: 0.9em; transition: all 0.3s ease; }
        .credits:hover { color: #bbb; }
        .credits a { color: #4a9eff; text-decoration: none; transition: color 0.3s ease; }
        .credits a:hover { color: #6bb6ff; text-decoration: underline; }
        .dropdown-options::-webkit-scrollbar { width: 8px; }
        .dropdown-options::-webkit-scrollbar-track { background: #1a1a1a; }
        .dropdown-options::-webkit-scrollbar-thumb { background: #4a9eff; border-radius: 4px; }
        .dropdown-options::-webkit-scrollbar-thumb:hover { background: #6bb6ff; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Superhero Tower Defense Trading Calculator</h1>
        </div>
        
        <div class="trading-area">
            <div class="side">
                <h2>Your Side</h2>
                <div id="mySide"></div>
                <button class="add-btn" onclick="addUnit('my')">Add Unit</button>
            </div>
            
            <div class="vs">VS</div>
            
            <div class="side">
                <h2>Opponent's Side</h2>
                <div id="oppSide"></div>
                <button class="add-btn" onclick="addUnit('opp')">Add Unit</button>
            </div>
        </div>
        
        <div class="result">
            <h2>Trade Analysis</h2>
            <div class="values">
                <div class="value-box">
                    <h3>Your Value</h3>
                    <div id="myValue">0</div>
                </div>
                <div class="value-box">
                    <h3>Difference</h3>
                    <div id="difference">0</div>
                </div>
                <div class="value-box">
                    <h3>Opponent's Value</h3>
                    <div id="oppValue">0</div>
                </div>
            </div>
            <div id="tradeStatus" class="trade-status fair">Fair Trade</div>
        </div>
        
        <div class="credits">
            Created by <strong>ItsFlux</strong>
        </div>
    </div>

    <script>
        let units = {
            "The Ruler": { value: "10000", rarity: "Secret" }, 
            "Shiny The Ruler": { value: "N/A", rarity: "Secret" },
            "Ultimate War Suit": { value: "1400", rarity: "Secret" }, 
            "Shiny Ultimate War Suit": { value: "N/A", rarity: "Secret" },
            "Evil Steel Man": { value: "250", rarity: "Exclusive" }, 
            "Shiny Evil Steel Man": { value: "1800", rarity: "Exclusive" },
            "Super Bemmy": { value: "550", rarity: "Exclusive" }, 
            "Shiny Super Bemmy": { value: "3200", rarity: "Exclusive" },
            "Traitor": { value: "70", rarity: "Exclusive" }, 
            "Shiny Traitor": { value: "800", rarity: "Exclusive" },
            "Monster": { value: "200", rarity: "Mythic" }, 
            "Shiny Monster": { value: "1650", rarity: "Mythic" },
            "Spider Mech": { value: "35", rarity: "Mythic" }, 
            "Shiny Spider Mech": { value: "325", rarity: "Mythic" },
            "Winged Suit": { value: "30", rarity: "Mythic" }, 
            "Shiny Winged Suit": { value: "300", rarity: "Mythic" },
            "Ocean King": { value: "25", rarity: "Mythic" }, 
            "Shiny Ocean King": { value: "275", rarity: "Mythic" },
            "Sand Golem": { value: "15", rarity: "Legendary" }, 
            "Shiny Sand Golem": { value: "125", rarity: "Legendary" },
            "Shiny Thunder Lord": { value: "75", rarity: "Legendary" },
            "Shiny Steel Man": { value: "35", rarity: "Legendary" },
            "Shiny War Suit": { value: "35", rarity: "Legendary" },
            "Shiny Iron Mech": { value: "40", rarity: "Legendary" },
            "Shiny Mutated Brute": { value: "35", rarity: "Epic" },
            "Shiny Brute": { value: "15", rarity: "Epic" },
            "Shiny Commander": { value: "25", rarity: "Rare" },
            "Shiny Doctor": { value: "15", rarity: "Rare" }
        };

        let rarities = ["Secret", "Exclusive", "Mythic", "Legendary", "Epic", "Rare"];
        let enchants = { "None": 0, "Flashstep": 15, "Spider Senses": 20, "Brute Smash": 35, "Inevitable": 75, "Infinity": 750 };
        let mySideUnits = [], oppSideUnits = [];

        function createCustomDropdown(options, placeholder, onSelect, selectedValue = "") {
            const dropdown = document.createElement('div'), selected = document.createElement('div'), optionsDiv = document.createElement('div');
            dropdown.className = 'custom-dropdown'; selected.className = 'dropdown-selected'; selected.textContent = selectedValue || placeholder; optionsDiv.className = 'dropdown-options';
            
            options.forEach(option => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'dropdown-option'; if (option.value === selectedValue) optionDiv.classList.add('selected');
                optionDiv.innerHTML = option.html || option.text;
                optionDiv.addEventListener('click', () => {
                    selected.innerHTML = option.html || option.text; optionsDiv.classList.remove('open'); selected.classList.remove('active'); onSelect(option.value);
                    optionsDiv.querySelectorAll('.dropdown-option').forEach(opt => opt.classList.remove('selected')); optionDiv.classList.add('selected');
                });
                optionsDiv.appendChild(optionDiv);
            });
            
            selected.addEventListener('click', (e) => {
                e.stopPropagation(); document.querySelectorAll('.dropdown-options.open').forEach(dd => { if (dd !== optionsDiv) { dd.classList.remove('open'); dd.previousElementSibling.classList.remove('active'); } });
                optionsDiv.classList.toggle('open'); selected.classList.toggle('active');
            });
            
            dropdown.appendChild(selected); dropdown.appendChild(optionsDiv); return dropdown;
        }

        document.addEventListener('click', () => { document.querySelectorAll('.dropdown-options.open').forEach(dd => { dd.classList.remove('open'); dd.previousElementSibling.classList.remove('active'); }); });

        function addUnit(side) {
            const container = document.getElementById(side === 'my' ? 'mySide' : 'oppSide'), unitDiv = document.createElement('div');
            unitDiv.className = 'unit-input';
            
            const sortedUnits = getSortedUnits(), unitOptions = [{ value: "", text: "Select Unit...", html: "Select Unit..." }].concat(sortedUnits.map(([unit, data]) => ({ value: unit, text: `[${data.rarity}] ${unit}`, html: `<span class="rarity-tag rarity-${data.rarity}">${data.rarity}</span>${unit}` })));
            const enchantOptions = Object.keys(enchants).map(enchant => ({ value: enchant, text: enchant, html: enchant }));
            
            const unitDropdown = createCustomDropdown(unitOptions, "Select Unit...", () => calculateTrade()), enchantDropdown = createCustomDropdown(enchantOptions, "None", () => calculateTrade(), "None");
            const qtyInput = document.createElement('input'); qtyInput.type = 'number'; qtyInput.placeholder = 'Quantity'; qtyInput.value = 1; qtyInput.min = 1; qtyInput.addEventListener('change', calculateTrade);
            const removeBtn = document.createElement('button'); removeBtn.className = 'remove-btn'; removeBtn.textContent = '×'; removeBtn.onclick = () => removeUnit(removeBtn, side);
            
            unitDiv.appendChild(unitDropdown); unitDiv.appendChild(enchantDropdown); unitDiv.appendChild(qtyInput); unitDiv.appendChild(removeBtn);
            container.appendChild(unitDiv); (side === 'my' ? mySideUnits : oppSideUnits).push(unitDiv);
        }

        function removeUnit(btn, side) {
            const unitDiv = btn.parentElement; unitDiv.style.transform = 'scale(0)'; unitDiv.style.opacity = '0';
            setTimeout(() => { unitDiv.remove(); const arr = side === 'my' ? mySideUnits : oppSideUnits; arr.splice(arr.indexOf(unitDiv), 1); calculateTrade(); }, 300);
        }

        function calculateTrade() {
            const myTotal = calculateSideValue(mySideUnits), oppTotal = calculateSideValue(oppSideUnits);
            document.getElementById('myValue').textContent = myTotal === null ? 'N/A' : myTotal.toLocaleString();
            document.getElementById('oppValue').textContent = oppTotal === null ? 'N/A' : oppTotal.toLocaleString();
            const status = document.getElementById('tradeStatus');
            
            if (myTotal === null || oppTotal === null) {
                document.getElementById('difference').textContent = 'N/A'; status.textContent = 'N/A Trade'; status.className = 'trade-status na';
            } else {
                const diff = myTotal - oppTotal; document.getElementById('difference').textContent = (diff >= 0 ? '+' : '') + diff.toLocaleString();
                if (diff > 0) { status.textContent = 'You Lose!'; status.className = 'trade-status lose'; } 
                else if (diff < 0) { status.textContent = 'You Win!'; status.className = 'trade-status win'; } 
                else { status.textContent = 'Fair Trade'; status.className = 'trade-status fair'; }
            }
        }

        function calculateSideValue(sideUnits) {
            let total = 0;
            for (const unitDiv of sideUnits) {
                const unitDropdown = unitDiv.querySelector('.custom-dropdown'), enchantDropdown = unitDiv.querySelectorAll('.custom-dropdown')[1], qtyInput = unitDiv.querySelector('input[type="number"]');
                const unitName = unitDropdown.dataset.value || '', enchantName = enchantDropdown.dataset.value || 'None', qty = parseInt(qtyInput.value) || 1;
                if (unitName && units[unitName]) { if (units[unitName].value === 'N/A') return null; const unitValue = parseInt(units[unitName].value), enchantValue = enchants[enchantName] || 0; total += (unitValue + enchantValue) * qty; }
            }
            return total;
        }

        function getSortedUnits() { return Object.entries(units).sort((a, b) => { const rarityA = rarities.indexOf(a[1].rarity), rarityB = rarities.indexOf(b[1].rarity); if (rarityA !== rarityB) return rarityA - rarityB; return a[0].localeCompare(b[0]); }); }

        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('dropdown-option')) {
                const dropdown = e.target.closest('.custom-dropdown'), optionValue = e.target.textContent.includes('[') ? e.target.textContent.match(/\] (.+)$/)?.[1] || '' : e.target.textContent;
                if (dropdown.querySelector('.dropdown-selected').textContent.includes('Select Unit') || dropdown.querySelector('.rarity-tag')) { dropdown.dataset.value = optionValue; } else { dropdown.dataset.value = e.target.textContent; }
            }
        });

        addUnit('my'); addUnit('opp'); calculateTrade();
    </script>
</body>
</html>
